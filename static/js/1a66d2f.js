(window.webpackJsonp=window.webpackJsonp||[]).push([[19,332,398,399,403,405],{1004:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tower-cells__cell-symbol-image"},[e("img",{attrs:{src:n(366),alt:"Nuts"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tower-cells__cell-symbol-image"},[e("img",{attrs:{src:n(367),alt:"Stone"}})])}],r=(n(2),n(4),n(3),n(5),n(1),n(6),n(14)),l=n(11),c=(n(30),n(0),n(19),n(18),n(36),n(31),n(39),n(49),n(17)),m=n(178),h=n(929);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"PagesGamesTowerGameCell",components:{IconNuts:function(){return Promise.resolve().then(n.t.bind(null,698,7))},IconStar:function(){return Promise.resolve().then(n.t.bind(null,699,7))}},props:{level:{type:Number},cell:{type:Number}},data:function(){return{explosion:null,animated:!1,animatingTimerId:null,processingNonce:null}},computed:f(f(f({},Object(c.e)({gameRoom:function(t){return t.towerSocket.room},readyToPlay:function(t){return t.towerSocket.readyToPlay},form:function(t){return t.towerSocket.form},activeBet:function(t){return t.towerSocket.activeBet},levelsCount:function(t){return t.tower.levelsCount},cellsCount:function(t){return t.tower.cellsCount},enabledAnimations:function(t){return t.common.animations}})),Object(c.c)({userAuthorized:"user/authorized",requestProcessing:"webSocket/requestProcessing"})),{},{autoBetCells:function(){return this.form?this.form.autoBetCells:[]},isAutoBetCell:function(){return this.form.autoBet&&this.autoBetCells[this.level]===this.cell},isActiveBetLevel:function(){return this.activeBet&&this.activeBet.openedCells.length===this.level&&!this.isFinishedGame},isActiveAutoBetLevel:function(){return this.form.autoBet&&!this.form.autoBetStarted&&this.autoBetCells.length===this.level},betProcessing:function(){return!!this.processingNonce&&this.requestProcessing(this.processingNonce)},isFinishedGame:function(){return this.activeBet&&(this.activeBet.status===m.a.Win||this.activeBet.status===m.a.Lose)},disabled:function(){return!this.userAuthorized||!this.readyToPlay||(!(this.form&&!this.form.betProcessing&&!this.betProcessing)||(!!(this.opening||this.opened||this.completed)||(!!(this.form.autoBet&&!this.form.autoBetStarted&&this.level>this.autoBetCells.length)||(!!this.form.autoBetStarted||!(!this.activeBet||this.isActiveBetLevel)))))},opening:function(){return null!==this.processingNonce},opened:function(){return this.activeBet&&this.activeBet.openedCells[this.level]===this.cell},completed:function(){return!(!this.opened&&!this.isFinishedGame)||!!(this.activeBet&&this.activeBet.openedCells.length>this.level)},type:function(){return this.completed||this.opened?this.activeBet&&this.activeBet.minesCells[this.level]&&this.activeBet.minesCells[this.level].includes(this.cell)?"lose":"win":null}}),mounted:function(){this.$root.$on("tower.openRandomCell",this.onOpenRandomCell),this.opened&&("lose"===this.type&&this.makeExplosion(),this.animate())},beforeDestroy:function(){this.$root.$off("tower.openRandomCell",this.onOpenRandomCell),this.animatingTimerId&&(clearTimeout(this.animatingTimerId),this.animatingTimerId=null)},methods:f(f(f({},Object(c.d)({updateForm:"towerSocket/updateForm",addAutoBetCell:"towerSocket/addAutoBetCell",removeAutoBetCell:"towerSocket/removeAutoBetCell",changeAutoBetCell:"towerSocket/changeAutoBetCell"})),Object(c.b)({addRequest:"webSocket/addRequest"})),{},{onOpenRandomCell:function(t){this.isActiveBetLevel&&t===this.cell&&this.onSubmit()},onSubmit:function(){this.disabled||(this.activeBet?this.onOpen():this.form&&this.form.autoBet&&this.onSelect())},onOpen:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processingNonce=t.$makeHash(),t.addRequest(t.processingNonce),t.updateForm({betProcessing:!0}),e.next=5,t.$makePause(100);case 5:t.$root.socket.emit("".concat(t.gameRoom,".open"),{nonce:t.processingNonce,cell:t.cell});case 6:case"end":return e.stop()}}),e)})))()},onSelect:function(){this.isAutoBetCell?this.removeAutoBetCell({level:this.level}):void 0!==this.autoBetCells[this.level]?this.changeAutoBetCell({level:this.level,cell:this.cell}):this.addAutoBetCell({level:this.level,cell:this.cell}),this.$root.$emit("sounds:click")},makeExplosion:function(){this.enabledAnimations&&(this.removeExplosion(),this.explosion=new h.a(this.$refs.cellContent,!0),this.explosion.play())},removeExplosion:function(){this.explosion&&(this.explosion.destroy(),this.explosion=null)},animate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.animated&&this.opened&&(this.animatingTimerId&&(clearTimeout(this.animatingTimerId),this.animatingTimerId=null),this.animatingTimerId=setTimeout((function(){t.animated=!0}),e?1:150))}}),watch:{betProcessing:function(t){t||(this.processingNonce=null,this.updateForm({betProcessing:!1}))},opened:function(t){t&&("lose"===this.type&&this.makeExplosion(),this.animate())},activeBet:function(t,e){t&&e&&t.uuid===e.uuid||this.removeExplosion()},enabledAnimations:function(t,e){t&&!e&&"lose"===this.type&&this.opened&&this.makeExplosion()}}},w=v,_=n(10),component=Object(_.a)(w,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:["tower-cells__cell",{"tower-cells__cell_disabled":e.disabled},{"tower-cells__cell_active":e.isActiveAutoBetLevel||e.isActiveBetLevel},{"tower-cells__cell_selected":e.isAutoBetCell},{"tower-cells__cell_opening":e.opening},{"tower-cells__cell_completed":e.completed},{"tower-cells__cell_opened":e.opened},(t={},t["tower-cells__cell_"+e.type]=e.type&&e.completed,t)],on:{click:e.onSubmit}},[o("div",{staticClass:"tower-cells__cell-wrapper"},[o("div",{ref:"cellContent",staticClass:"tower-cells__cell-content"},[o("div",{staticClass:"tower-cells__cell-placeholder"},[o("IconNuts",{attrs:{id:"tower-cells__cell__nuts"}})],1),e._v(" "),o("div",{class:["tower-cells__cell-symbol",{"tower-cells__cell-symbol_visible":e.completed&&"win"===e.type},{"tower-cells__cell-symbol_animated":e.completed&&"win"===e.type&&e.opened&&e.animated&&e.enabledAnimations}]},[e._m(0)]),e._v(" "),e.completed&&"win"===e.type&&e.opened&&e.enabledAnimations?[o("div",{staticClass:"tower-cells__cell-stars"},[o("IconStar",{staticClass:"tower-cells__cell-star tower-cells__cell-star-1"}),e._v(" "),o("IconStar",{staticClass:"tower-cells__cell-star tower-cells__cell-star-2"}),e._v(" "),o("IconStar",{staticClass:"tower-cells__cell-star tower-cells__cell-star-3"})],1)]:e._e(),e._v(" "),o("div",{class:["tower-cells__cell-symbol",{"tower-cells__cell-symbol_visible":e.completed&&"lose"===e.type},{"tower-cells__cell-symbol_animated":e.completed&&"lose"===e.type&&e.opened&&e.animated&&e.enabledAnimations}]},[e._m(1)])],2)])])}),o,!1,null,null,null);e.default=component.exports},1157:function(t,e,n){"use strict";n.r(e);var o=n(11),r=(n(0),n(19),n(18),n(2),n(4),n(3),n(5),n(1),n(6),n(17));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={name:"PagesGamesTowerGameInformer",components:{PagesGamesCommonSettings:function(){return Promise.resolve().then(n.bind(null,912))}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.e)({windowSize:function(t){return t.page.windowSize}}))},m=c,h=n(10),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tower-informer"},[n("div",{staticClass:"tower-informer-header"},[t.windowSize>576?n("PagesGamesCommonSettings",{attrs:{game:"tower",showRulesButton:!1}}):t._e()],1),t._v(" "),n("div",{staticClass:"tower-informer-footer"},[t.windowSize>576?n("PagesGamesCommonSettings",{attrs:{game:"tower",showSoundButton:!1,showAnimationButton:!1,showFairnessButton:!1,showRulesText:!0}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PagesGamesCommonSettings:n(912).default})},1158:function(t,e,n){"use strict";n.r(e);var o=n(11),r=(n(0),n(19),n(18),n(2),n(4),n(3),n(5),n(1),n(6),n(17));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"PagesGamesTowerGameCells",components:{PagesGamesTowerGameCell:function(){return Promise.resolve().then(n.bind(null,1004))}},computed:c(c({},Object(r.e)({activeBet:function(t){return t.towerSocket.activeBet},levelsCount:function(t){return t.tower.levelsCount},cellsCount:function(t){return t.tower.cellsCount}})),{},{cellKeyPrefix:function(){return this.activeBet?this.activeBet.uuid:""}})},h=n(10),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tower-cells"},[t._l(t.levelsCount,(function(e){return[n("div",{key:e,staticClass:"tower-cells__row"},[t._l(t.cellsCount,(function(o){return[n("PagesGamesTowerGameCell",{key:e+":"+o,attrs:{level:t.levelsCount-e,cell:o-1}})]}))],2)]}))],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PagesGamesTowerGameCell:n(1004).default})},1159:function(t,e,n){"use strict";n.r(e);n(2),n(4),n(3),n(0),n(5),n(1),n(6);var o=n(11),r=n(17),l=n(178),c=n(926);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"PagesGamesTowerGameMultipliers",data:function(){return{multipliers:[]}},computed:h(h({},Object(r.e)({rtp:function(t){return t.tower.rtpValue},levelsCount:function(t){return t.tower.levelsCount},cellsCount:function(t){return t.tower.cellsCount},form:function(t){return t.towerSocket.form},activeBet:function(t){return t.towerSocket.activeBet},windowSize:function(t){return t.page.windowSize}})),{},{autoBet:function(){return!!this.form&&this.form.autoBet},autoBetCells:function(){return this.form?this.form.autoBetCells:[]},minesCount:function(){return this.form?this.form.minesCount:0},openedCellsCount:function(){return this.autoBet?this.autoBetCells.length:this.activeBet?this.activeBet.status===l.a.Lose?this.activeBet.openedCells.length-1:this.activeBet.openedCells.length:0}}),mounted:function(){this.init()},methods:{init:function(){this.multipliers=Object(c.e)(this.minesCount,{rtp:this.rtp,levelsCount:this.levelsCount,cellsCount:this.cellsCount}).reverse()}},watch:{minesCount:function(){this.init()}}},f=n(10),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tower-multipliers"},[t._l(t.multipliers,(function(e,o){return[n("div",{key:o+"_"+e,class:["tower-multipliers__item",{"tower-multipliers__item_opened":t.openedCellsCount>t.multipliers.length-o},{"tower-multipliers__item_winning":t.openedCellsCount===t.multipliers.length-o}]},[n("small",[t._v(t._s(t.$tc("pages.games.tower.game.multipliers.hits",t.multipliers.length-o)))]),t._v(" "),n("strong",[t._v(t._s(t.$formatMultiplier(e)))])])]}))],2)}),[],!1,null,null,null);e.default=component.exports},1160:function(t,e,n){"use strict";n.r(e);var o=n(15),r=n(11),l=(n(0),n(19),n(18),n(2),n(4),n(3),n(5),n(1),n(6),n(17)),c=n(35),m=n(178);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"PagesGamesTowerGameStatusBar",components:{IconMagicTool:function(){return Promise.resolve().then(n.t.bind(null,720,7))}},computed:d(d({},Object(l.e)({form:function(t){return t.towerSocket.form},activeBet:function(t){return t.towerSocket.activeBet},cellsCount:function(t){return t.tower.cellsCount}})),{},{isChoiceBet:function(){return!this.form||!this.form.autoBet&&!this.isWin},isChoiceAutoBet:function(){return this.form&&this.form.autoBet&&!this.isWin},isWin:function(){return this.activeBet&&this.activeBet.status===m.a.Win},autoBetStarted:function(){return!!this.form&&this.form.autoBetStarted},canAutoChoice:function(){return!(!this.isChoiceBet||!this.activeBet||this.activeBet.status!==m.a.New&&this.activeBet.status!==m.a.Active||!this.form||this.form.betProcessing)},winMultiplier:function(){return this.isWin?"x".concat(this.activeBet.multiplier):0},winAmount:function(){return this.isWin?this.activeBet.winAmount:0},autoBetCells:function(){return this.form?this.form.autoBetCells:[]}}),methods:d(d({},Object(l.d)({resetAutoBetCells:"towerSocket/resetAutoBetCells"})),{},{choiceRandomCell:function(){if(this.canAutoChoice){var t=Object(o.a)(Array(this.cellsCount).keys()),e=this.$randomArray(t);this.$root.$emit("tower.openRandomCell",e)}},resetCells:function(){this.autoBetCells.length&&!this.autoBetStarted&&(this.$root.$emit("sounds:click"),this.resetAutoBetCells())},onShowBet:function(){this.isWin&&this.$root.$emit("showBet",{game:c.a.Tower,uuid:this.activeBet.uuid})}})},v=n(10),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tower-status-bar"},[n("div",{staticClass:"tower-status-bar-content"},[n("div",{staticClass:"tower-status-bar__choice tower-status-bar__choice_bet",class:{"tower-status-bar__choice_visible":t.isChoiceBet}},[n("div",{staticClass:"tower-status-bar__choice-text"},[n("strong",[t._v(t._s(t.$t("pages.games.tower.game.statusBar.choiceBet.manual")))])]),t._v(" "),n("div",{staticClass:"tower-status-bar__choice-text"},[t._v("\n        "+t._s(t.$t("pages.games.tower.game.statusBar.choiceBet.or"))+"\n      ")]),t._v(" "),n("button",{class:["tower-status-bar__choice-button","tower-status-bar__choice-button_yellow",{"tower-status-bar__choice-button_disabled":!t.canAutoChoice}],attrs:{disabled:!t.canAutoChoice,"aria-label":"Random"},on:{click:t.choiceRandomCell}},[n("span",[t._v(t._s(t.$t("pages.games.tower.game.statusBar.choiceBet.random")))]),t._v(" "),n("IconMagicTool")],1)]),t._v(" "),n("div",{staticClass:"tower-status-bar__choice tower-status-bar__choice_auto-bet",class:{"tower-status-bar__choice_visible":t.isChoiceAutoBet}},[n("div",{staticClass:"tower-status-bar__choice-text tower-status-bar__choice-text_wide",domProps:{innerHTML:t._s(t.$t("pages.games.tower.game.statusBar.choiceAutoBet.text"))}}),t._v(" "),n("button",{class:["tower-status-bar__choice-button","tower-status-bar__choice-button_default",{"tower-status-bar__choice-button_disabled":!t.autoBetCells.length||t.autoBetStarted}],attrs:{disabled:!t.autoBetCells.length||t.autoBetStarted,"aria-label":"Reset"},on:{click:t.resetCells}},[n("span",[t._v(t._s(t.$t("pages.games.tower.game.statusBar.choiceAutoBet.reset")))])])]),t._v(" "),n("div",{staticClass:"tower-status-bar__win",class:{"tower-status-bar__win_visible":t.isWin},on:{click:t.onShowBet}},[n("div",{staticClass:"tower-status-bar__win-text"},[t._v(t._s(t.$t("pages.games.tower.game.statusBar.win.text")))]),t._v(" "),n("div",{staticClass:"tower-status-bar__win-multiplier"},[t.winMultiplier?n("span",[t._v(t._s(t.winMultiplier))]):t._e()]),t._v(" "),n("div",{staticClass:"tower-status-bar__win-text"},[t.winAmount?n("vAmount",{attrs:{amount:t.winAmount}}):t._e()],1)])])])}),[],!1,null,null,null);e.default=component.exports},1307:function(t,e,n){"use strict";n.r(e);n(0),n(19),n(18);var o={name:"PagesGamesTowerGame",components:{PagesGamesTowerGameCells:function(){return Promise.resolve().then(n.bind(null,1158))},PagesGamesTowerGameInformer:function(){return Promise.resolve().then(n.bind(null,1157))},PagesGamesTowerGameMultipliers:function(){return Promise.resolve().then(n.bind(null,1159))},PagesGamesTowerGameStatusBar:function(){return Promise.resolve().then(n.bind(null,1160))},PagesGamesTowerGameForm:function(){return Promise.resolve().then(n.bind(null,1308))}}},r=n(10),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tower-game"},[n("div",{staticClass:"tower-game-body"},[n("div",{staticClass:"tower-game-body-left"},[n("PagesGamesTowerGameInformer")],1),t._v(" "),n("div",{staticClass:"tower-game-body-right"},[n("div",{staticClass:"tower-game-field"},[n("PagesGamesTowerGameCells"),t._v(" "),n("PagesGamesTowerGameMultipliers")],1),t._v(" "),n("PagesGamesTowerGameStatusBar")],1)]),t._v(" "),n("div",{staticClass:"tower-game-footer"},[n("PagesGamesTowerGameForm")],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PagesGamesTowerGameInformer:n(1157).default,PagesGamesTowerGameCells:n(1158).default,PagesGamesTowerGameMultipliers:n(1159).default,PagesGamesTowerGameStatusBar:n(1160).default,PagesGamesTowerGameForm:n(1308).default})},912:function(t,e,n){"use strict";n.r(e);var o=n(11),r=(n(0),n(19),n(18),n(2),n(4),n(3),n(5),n(1),n(6),n(17)),l=n(35);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"PagesGamesCommonSettings",components:{IconSoundOn:function(){return Promise.resolve().then(n.t.bind(null,834,7))},IconSoundOff:function(){return Promise.resolve().then(n.t.bind(null,833,7))},IconAnimation:function(){return Promise.resolve().then(n.t.bind(null,613,7))},IconSecure:function(){return Promise.resolve().then(n.t.bind(null,791,7))},IconQuestion:function(){return Promise.resolve().then(n.t.bind(null,782,7))}},props:{game:{type:String},showSoundButton:{type:Boolean,default:!0},showAnimationButton:{type:Boolean,default:!0},showFairnessButton:{type:Boolean,default:!0},showRulesButton:{type:Boolean,default:!0},showRulesText:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},computed:m({},Object(r.e)({enabledSound:function(t){return t.common.soundVolume},enabledAnimations:function(t){return t.common.animations}})),methods:m(m({},Object(r.b)({setSoundVolume:"common/setSoundVolume",setAnimations:"common/setAnimations"})),{},{toggleAnimation:function(){this.setAnimations(!this.enabledAnimations),this.$root.$emit("sounds:click")},toggleSound:function(){this.setSoundVolume(!this.enabledSound),this.$root.$emit("sounds:click")},onOpenRules:function(){this.$root.$emit("showGameRules",{game:this.game})},onOpenFairnessModal:function(){this.game===l.a.Crash?this.$modal.show("crashFairnessModal"):this.$modal.show("fairnessModal",{mainInputs:{game:this.game}})}})},d=n(10),component=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["game-settings",{"game-settings_dark":t.dark}]},[t.showSoundButton?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.enabledSound?t.$t("pages.games.common.tools.sound.off"):t.$t("pages.games.common.tools.sound.on"),expression:"enabledSound ? $t('pages.games.common.tools.sound.off') : $t('pages.games.common.tools.sound.on')"}],staticClass:"game-settings__item",class:{"game-settings__item_active":t.enabledSound},attrs:{"aria-label":"Toggle sound"},on:{click:t.toggleSound}},[t.enabledSound?n("IconSoundOn"):n("IconSoundOff")],1):t._e(),t._v(" "),t.showAnimationButton?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.enabledAnimations?t.$t("pages.games.common.tools.animation.off"):t.$t("pages.games.common.tools.animation.on"),expression:"enabledAnimations ? $t('pages.games.common.tools.animation.off') : $t('pages.games.common.tools.animation.on')"}],staticClass:"game-settings__item",class:{"game-settings__item_active":t.enabledAnimations},attrs:{"aria-label":"Toggle animations"},on:{click:t.toggleAnimation}},[n("IconAnimation")],1):t._e(),t._v(" "),t.showFairnessButton?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("pages.games.common.tools.fairness"),expression:"$t('pages.games.common.tools.fairness')"}],staticClass:"game-settings__item",attrs:{"aria-label":"Fairness"},on:{click:t.onOpenFairnessModal}},[n("IconSecure")],1):t._e(),t._v(" "),t.showRulesButton?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("pages.games.common.tools.rules"),expression:"$t('pages.games.common.tools.rules')"}],staticClass:"game-settings__item",attrs:{"aria-label":"Game rules"},on:{click:t.onOpenRules}},[t.showRulesText?n("span",[t._v(t._s(t.$t("pages.games.common.tools.rulesText")))]):t._e(),t._v(" "),n("IconQuestion")],1):t._e()])}),[],!1,null,null,null);e.default=component.exports},929:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var o=n(140),r=n(141),l=(n(47),n(75),n(19),n(3),n(0),n(7),n(40)),c=function(){function t(e,n,r){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(o.a)(this,t),this.pos={x:e,y:n},this.cellSize=r,this.isTowerGame=c,this.angle=Object(l.n)(0,t.PI2),this.n=15*Math.cos(Object(l.n)(0,t.PI2)),this.r=[this.pos,this.pos,this.pos],this.c={x:Math.cos(this.angle)*this.n,y:Math.sin(this.angle)*this.n},this.f=Object(l.n)(.02,.07),this.s=Object(l.n)(0,50),this.l=c?Object(l.n)(20,60):Object(l.n)(50,90),this.u=1,this.lineWidth=this.cellSize*(c?.2:.1)}return Object(r.a)(t,[{key:"update",value:function(e){this.r.pop(),this.r.unshift({x:this.pos.x,y:this.pos.y}),this.c.x-=this.c.x*t.PointerMoveAcceleration*e,this.c.y-=this.c.y*t.PointerMoveAcceleration*e,this.pos.x+=this.c.x*e,this.pos.y+=this.c.y*e,this.lineWidth-=this.lineWidth*this.f*e,this.u-=t.PointerLightingAcceleration*e}},{key:"draw",value:function(t){var e=this.r[2];t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(this.pos.x,this.pos.y),t.lineWidth=this.lineWidth,t.lineCap="round",this.isTowerGame?t.strokeStyle="hsla(0, 0%, ".concat(this.l,"%, ").concat(this.u,")"):t.strokeStyle="hsla(".concat(this.s,", 100%, ").concat(this.l,"%, ").concat(this.u,")"),t.stroke()}},{key:"shouldRemove",value:function(){return this.u<=.01||this.lineWidth<=.01}},{key:"destroy",value:function(){this.pos=null,this.r=null,this.c=null}}]),t}();c.PointerMoveAcceleration=.06,c.PointerLightingAcceleration=.01,c.PI2=2*Math.PI;var m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.a)(this,t),this.$cell=e,this.isTowerGame=n,this.pixelRatio=window.devicePixelRatio||1,this.pointersCount=40,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.cellSize=e.offsetWidth,this.explosionSize=Math.round(2.4*this.cellSize),this.canvasSize=2*this.explosionSize,this.canvasCenterX=this.canvasSize/2,this.canvasCenterY=this.canvasSize/2,this._fitCanvas(),this.pointers=this._makePointers(),this.startedAt=null,this.animation=null}return Object(r.a)(t,[{key:"play",value:function(){this.startedAt=Date.now(),this._draw(),this.$cell.prepend(this.canvas)}},{key:"_fitCanvas",value:function(){this.context.scale(this.pixelRatio,this.pixelRatio),this.canvas.width=this.canvasSize,this.canvas.height=this.canvasSize,this.canvas.style.width="".concat(this.explosionSize,"px"),this.canvas.style.height="".concat(this.explosionSize,"px")}},{key:"_makePointers",value:function(){var t=this;return Array.from({length:this.pointersCount}).map((function(){return new c(t.canvasCenterX,t.canvasCenterY,t.cellSize,t.isTowerGame)}))}},{key:"_draw",value:function(){var t=this;if(this.canvas&&this.context){if(this.animation&&(cancelAnimationFrame(this.animation),this.animation=null),0===this.pointers.length)return this.context.clearRect(0,0,this.canvasSize,this.canvasSize),void this.destroy();var e=Date.now(),n=(e-this.startedAt)/1e3*60;this.startedAt=e,this.context.globalCompositeOperation="destination-out",this.context.fillStyle="rgba(0, 0, 0, 0.5)",this.context.fillRect(0,0,this.canvasSize,this.canvasSize),this.context.globalCompositeOperation="lighter",this.pointers=this.pointers.filter((function(e){return e.shouldRemove()?(e.destroy(),!1):(e.draw(t.context),e.update(n),!0)})),this.animation=requestAnimationFrame((function(){t._draw()}))}}},{key:"destroy",value:function(){this.canvas&&(this.canvas.remove(),this.canvas=null),this.$cell=null,this.context=null,this.pointers=[],this.startedAt=null,this.animation=null}}]),t}()}}]);