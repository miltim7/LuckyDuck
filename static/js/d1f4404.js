(window.webpackJsonp=window.webpackJsonp||[]).push([[446,358,362],{1007:function(e,t,o){"use strict";o.r(t);o(2),o(4),o(3),o(5),o(1),o(6);var n=o(15),r=o(11),c=(o(0),o(45),o(49),o(17));function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={name:"PagesGamesCrashSockets",data:function(){return{pingPongEnabled:!1,pingPongTimerId:null,pingPongDelay:5e3,pingDate:null,pongDate:null}},props:{simpleMode:{type:Boolean,default:!1}},computed:h(h(h({},Object(c.e)({userBets:function(e){return e.crashSocket.userBets},connected:function(e){return e.webSocket.connected},gameRoom:function(e){return e.crashSocket.room},currentGame:function(e){return e.crashSocket.game},pageVisible:function(e){return e.page.visible}})),Object(c.c)({authorized:"user/authorized",isRoomMembership:"webSocket/isRoomMembership"})),{},{isJoinedInGameRoom:function(){return this.isRoomMembership(this.gameRoom)}}),mounted:function(){this.initSocketEventsListeners(),this.onInitGame()},beforeDestroy:function(){this.removeSocketEventsListeners(),this.onResetGame()},methods:h(h(h({},Object(c.d)({setGame:"crashSocket/setGame",updateGame:"crashSocket/updateGame",updateGameStatus:"crashSocket/updateGameStatus",resetGame:"crashSocket/resetGame",setGameSettings:"crashSocket/setGameSettings",resetGameSettings:"crashSocket/resetGameSettings",setGameBets:"crashSocket/setGameBets",addGameBets:"crashSocket/addGameBets",removeGameBets:"crashSocket/removeGameBets",updateGameBetsByWins:"crashSocket/updateGameBetsByWins",resetGameBets:"crashSocket/resetGameBets",setGameUserBets:"crashSocket/setGameUserBets",addGameUserBet:"crashSocket/addGameUserBet",removeGameUserBet:"crashSocket/removeGameUserBet",updateGameUserBet:"crashSocket/updateGameUserBet",updateGameUserBetsByWins:"crashSocket/updateGameUserBetsByWins",resetGameUserBets:"crashSocket/resetGameUserBets",setGamesHistory:"crashSocket/setGamesHistory",resetGameHistory:"crashSocket/resetGameHistory",addPing:"crashSocket/addPing",addFailedGames:"crashSocket/addFailedGames",resetFailedGames:"crashSocket/resetFailedGames"})),Object(c.b)({removeRequest:"webSocket/removeRequest",resetRequests:"webSocket/resetRequests"})),{},{onInitGame:function(){this.connected&&(this.isJoinedInGameRoom||this.connectToGameRoom())},onResetGame:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stopPingPong(),e||this.leaveFromGameRoom(),this.resetGame(),this.resetGameSettings(),this.resetGameBets(),this.resetGameUserBets(),this.resetGameHistory(),this.resetFailedGames()},connectToGameRoom:function(){this.$root.socket.emit("roomJoin",this.gameRoom)},leaveFromGameRoom:function(){this.$root.socket.emit("roomLeave",this.gameRoom)},initSocketEventsListeners:function(){var e=this;this.$root.socket.on("".concat(this.gameRoom,".status"),(function(data){e.onStatus(data)})),this.simpleMode||(this.$root.socket.on("".concat(this.gameRoom,".countdown"),(function(data){e.onCountdown(data)})),this.$root.socket.on("".concat(this.gameRoom,".timing"),(function(data){e.onTiming(data)}))),this.$root.socket.on("".concat(this.gameRoom,".bets"),(function(data){e.onBets(data)})),this.$root.socket.on("".concat(this.gameRoom,".wins"),(function(data){e.onWins(data)})),this.$root.socket.on("".concat(this.gameRoom,".fails"),(function(data){e.onFails(data)})),this.$root.socket.on("".concat(this.gameRoom,".info"),(function(data){e.onGameInfo(data)})),this.simpleMode||(this.$root.socket.on("".concat(this.gameRoom,".pong"),(function(){e.onPong()})),this.$root.socket.on("".concat(this.gameRoom,".bet"),(function(data){e.onBet(data)})),this.$root.socket.on("".concat(this.gameRoom,".cancel"),(function(data){e.onCancel(data)})),this.$root.socket.on("".concat(this.gameRoom,".take"),(function(data){e.onTake(data)})),this.$root.socket.on("".concat(this.gameRoom,".refund"),(function(data){e.onRefund(data)})))},removeSocketEventsListeners:function(){this.$root.socket.removeAllListeners("".concat(this.gameRoom,".status")),this.simpleMode||(this.$root.socket.removeAllListeners("".concat(this.gameRoom,".countdown")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".timing"))),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".bets")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".wins")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".fails")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".info")),this.simpleMode||(this.$root.socket.removeAllListeners("".concat(this.gameRoom,".pong")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".bet")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".cancel")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".take")),this.$root.socket.removeAllListeners("".concat(this.gameRoom,".refund")))},getGameInfo:function(){this.$root.socket.emit("".concat(this.gameRoom,".info"))},checkBetsFails:function(){this.$root.socket.emit("".concat(this.gameRoom,".fails"))},onStatus:function(e){var t=e.value,o=e.game,n=void 0===o?null:o;this.updateGameStatus({value:t,game:n})},onCountdown:function(e){this.updateGame({countdown:e})},onTiming:function(e){var t=e.value,o=e.last;this.updateGame({timingValue:t,timingLast:o})},onBets:function(e){var t=e.action,o=e.bets;"add"===t?this.addGameBets(Object(n.a)(o)):"remove"===t&&this.removeGameBets(Object(n.a)(o))},onWins:function(e){this.updateGameBetsByWins(Object(n.a)(e)),this.updateGameUserBetsByWins(Object(n.a)(e)),this.userBets.some((function(t){return!!e.find((function(e){return e.uuid===t.uuid}))}))&&this.$root.$emit("sounds:crash:betWin")},onFails:function(e){this.addFailedGames(e),this.simpleMode||(this.$noty({title:this.$t("notifications.warn"),text:this.$t("notifications.gameRestartedAfterFail"),type:"error"}),this.authorized&&this.checkBetsFails())},onGameInfo:function(data){this.setGame(data.game),this.setGameSettings(data.settings),this.setGameBets(data.bets),this.setGameUserBets(data.userBets),this.setGamesHistory(data.history)},onBet:function(data){this.addGameUserBet(data),this.removeRequest(data.nonce),this.$root.$emit("sounds:crash:betMaking")},onCancel:function(data){this.removeGameUserBet(data.betUuid),this.removeRequest(data.nonce),this.$root.$emit("sounds:crash:betCanceling")},onTake:function(data){this.updateGameUserBet(data),this.removeRequest(data.nonce)},onRefund:function(data){var e=this.$formatAmount(data.amount,{useCurrency:!0});this.$noty({title:this.$t("notifications.warn"),text:this.$t("notifications.gameRefundAfterFail",{amount:e,game:this.$t("games.".concat(data.gameType,".name"))}),type:"warning",duration:5e3})},startPingPong:function(){this.pingPongEnabled||this.simpleMode||(this.pingPongEnabled=!0,this.onPing())},stopPingPong:function(){this.pingPongTimerId&&(clearTimeout(this.pingPongTimerId),this.pingPongTimerId=null),this.pingPongEnabled=!1},onPing:function(){this.pingPongEnabled&&(this.pingDate=Date.now(),this.$root.socket.emit("".concat(this.gameRoom,".ping")))},onPong:function(){var e=this;this.pingPongEnabled&&(this.pongDate=Date.now(),this.pingDate&&this.pongDate&&this.addPing(this.pongDate-this.pingDate),this.pingPongTimerId=setTimeout((function(){e.pingDate=null,e.pongDate=null,e.onPing()}),this.pingPongDelay))}}),watch:{authorized:function(e){e||(this.resetGameUserBets(),this.resetRequests())},connected:function(e){e?this.onInitGame():this.onResetGame(!0)},isJoinedInGameRoom:function(e){e&&(this.startPingPong(),this.getGameInfo())},pageVisible:function(e){e?this.onInitGame():this.onResetGame()}}},d=l,f=o(10),component=Object(f.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},1175:function(e,t,o){"use strict";o.r(t);var n={name:"PagesGamesCrashHistoryMenu",data:function(){return{menu:[{name:"pages.games.crash.history.menu.current",link:"/games/crash/history/current"},{name:"pages.games.crash.history.menu.future",link:"/games/crash/history/future"}]}}},r=o(10),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"crash-history-menu"},[o("vTabMenu",{attrs:{items:e.menu}})],1)}),[],!1,null,null,null);t.default=component.exports},1382:function(e,t,o){"use strict";o.r(t);var n=o(11),r=(o(0),o(19),o(18),o(2),o(4),o(3),o(5),o(1),o(6),o(17));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var m={components:{PagesGamesCrashSockets:function(){return Promise.resolve().then(o.bind(null,1007))},PagesGamesCrashHistoryMenu:function(){return Promise.resolve().then(o.bind(null,1175))}},created:function(){this.setPage({title:this.$t("seo.games.crash.history.pageTitle"),icon:"sidebar/menu/crash"})},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(r.d)({setPage:"page/setPage"}))},h=m,l=o(10),component=Object(l.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"crash-history"},[o("div",{staticClass:"container"},[o("PagesGamesCrashHistoryMenu"),e._v(" "),o("NuxtChild")],1),e._v(" "),o("PagesGamesCrashSockets",{attrs:{"simple-mode":!0}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{PagesGamesCrashHistoryMenu:o(1175).default,PagesGamesCrashSockets:o(1007).default})}}]);